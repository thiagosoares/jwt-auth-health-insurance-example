<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="596px" preserveAspectRatio="none" style="width:1294px;height:596px;" version="1.1" viewBox="0 0 1294 596" width="1294px" zoomAndPan="magnify"><defs><filter height="300%" id="f1pzr633ip8k57" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1pzr633ip8k57)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="212.5" y="84.4297"/><rect fill="#FFFFFF" filter="url(#f1pzr633ip8k57)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="212.5" y="200.9609"/><rect fill="#FFFFFF" filter="url(#f1pzr633ip8k57)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="597.5" y="113.5625"/><rect fill="#FFFFFF" filter="url(#f1pzr633ip8k57)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="597.5" y="230.0938"/><rect fill="#FFFFFF" filter="url(#f1pzr633ip8k57)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="762.5" y="317.4922"/><rect fill="#FFFFFF" filter="url(#f1pzr633ip8k57)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="762.5" y="434.0234"/><rect fill="#FFFFFF" filter="url(#f1pzr633ip8k57)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1216.5" y="346.625"/><rect fill="#FFFFFF" filter="url(#f1pzr633ip8k57)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1216.5" y="463.1563"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="60" x2="60" y1="53.2969" y2="539.4219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="217" x2="217" y1="53.2969" y2="539.4219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="602.5" x2="602.5" y1="53.2969" y2="539.4219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="767.5" x2="767.5" y1="53.2969" y2="539.4219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1221" x2="1221" y1="53.2969" y2="539.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="5" y="49.9951">Partner Service</text><path d="M39.5,9 L39.5,33 M39.5,21 L56.5,21 " fill="none" filter="url(#f1pzr633ip8k57)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="68.5" cy="21" fill="#FEFECE" filter="url(#f1pzr633ip8k57)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="5" y="551.417">Partner Service</text><path d="M39.5,558.7188 L39.5,582.7188 M39.5,570.7188 L56.5,570.7188 " fill="none" filter="url(#f1pzr633ip8k57)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="68.5" cy="570.7188" fill="#FEFECE" filter="url(#f1pzr633ip8k57)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1pzr633ip8k57)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="181" x="125" y="18"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="167" x="132" y="37.9951">AuthenticationController</text><rect fill="#FEFECE" filter="url(#f1pzr633ip8k57)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="181" x="125" y="538.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="167" x="132" y="558.417">AuthenticationController</text><rect fill="#FEFECE" filter="url(#f1pzr633ip8k57)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="164" x="518.5" y="18"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="150" x="525.5" y="37.9951">AuthenticationService</text><rect fill="#FEFECE" filter="url(#f1pzr633ip8k57)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="164" x="518.5" y="538.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="150" x="525.5" y="558.417">AuthenticationService</text><rect fill="#FEFECE" filter="url(#f1pzr633ip8k57)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="138" x="696.5" y="18"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="124" x="703.5" y="37.9951">AccountController</text><rect fill="#FEFECE" filter="url(#f1pzr633ip8k57)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="138" x="696.5" y="538.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="124" x="703.5" y="558.417">AccountController</text><rect fill="#FEFECE" filter="url(#f1pzr633ip8k57)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="121" x="1159" y="18"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1166" y="37.9951">AccountService</text><rect fill="#FEFECE" filter="url(#f1pzr633ip8k57)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="121" x="1159" y="538.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1166" y="558.417">AccountService</text><rect fill="#FFFFFF" filter="url(#f1pzr633ip8k57)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="212.5" y="84.4297"/><rect fill="#FFFFFF" filter="url(#f1pzr633ip8k57)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="212.5" y="200.9609"/><rect fill="#FFFFFF" filter="url(#f1pzr633ip8k57)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="597.5" y="113.5625"/><rect fill="#FFFFFF" filter="url(#f1pzr633ip8k57)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="597.5" y="230.0938"/><rect fill="#FFFFFF" filter="url(#f1pzr633ip8k57)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="762.5" y="317.4922"/><rect fill="#FFFFFF" filter="url(#f1pzr633ip8k57)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="762.5" y="434.0234"/><rect fill="#FFFFFF" filter="url(#f1pzr633ip8k57)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1216.5" y="346.625"/><rect fill="#FFFFFF" filter="url(#f1pzr633ip8k57)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1216.5" y="463.1563"/><polygon fill="#A80036" points="200.5,80.4297,210.5,84.4297,200.5,88.4297,204.5,84.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="60" x2="206.5" y1="84.4297" y2="84.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="67" y="79.3638">Login as Partner</text><polygon fill="#A80036" points="585.5,109.5625,595.5,113.5625,585.5,117.5625,589.5,113.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="222.5" x2="591.5" y1="113.5625" y2="113.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="229.5" y="108.4966">POST /auth/login {clientId}</text><polygon fill="#A80036" points="233.5,138.6953,223.5,142.6953,233.5,146.6953,229.5,142.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="227.5" x2="601.5" y1="142.6953" y2="142.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="239.5" y="137.6294">Partner Token</text><polygon fill="#A80036" points="71,167.8281,61,171.8281,71,175.8281,67,171.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="65" x2="216.5" y1="171.8281" y2="171.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="77" y="166.7622">Partner Login</text><polygon fill="#A80036" points="200.5,196.9609,210.5,200.9609,200.5,204.9609,204.5,200.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="60" x2="206.5" y1="200.9609" y2="200.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="67" y="195.895">Login as User</text><polygon fill="#A80036" points="585.5,226.0938,595.5,230.0938,585.5,234.0938,589.5,230.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="222.5" x2="591.5" y1="230.0938" y2="230.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="356" x="229.5" y="225.0278">POST /auth/account/login [PartnerToken] + {accountId}</text><polygon fill="#A80036" points="233.5,255.2266,223.5,259.2266,233.5,263.2266,229.5,259.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="227.5" x2="601.5" y1="259.2266" y2="259.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="239.5" y="254.1606">Account specific token</text><polygon fill="#A80036" points="71,284.3594,61,288.3594,71,292.3594,67,288.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="65" x2="216.5" y1="288.3594" y2="288.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="77" y="283.2935">Account Login</text><polygon fill="#A80036" points="750.5,313.4922,760.5,317.4922,750.5,321.4922,754.5,317.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="60" x2="756.5" y1="317.4922" y2="317.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="67" y="312.4263">Get Account Users as Partner</text><polygon fill="#A80036" points="1204.5,342.625,1214.5,346.625,1204.5,350.625,1208.5,346.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="772.5" x2="1210.5" y1="346.625" y2="346.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="317" x="779.5" y="341.5591">Get /account/{accountId}/users + [PartnerToken]</text><polygon fill="#A80036" points="783.5,371.7578,773.5,375.7578,783.5,379.7578,779.5,375.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="777.5" x2="1220.5" y1="375.7578" y2="375.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="789.5" y="370.6919">Account Users</text><polygon fill="#A80036" points="71,400.8906,61,404.8906,71,408.8906,67,404.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="65" x2="766.5" y1="404.8906" y2="404.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="77" y="399.8247">Account Users</text><polygon fill="#A80036" points="750.5,430.0234,760.5,434.0234,750.5,438.0234,754.5,434.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="60" x2="756.5" y1="434.0234" y2="434.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="67" y="428.9575">Get Account Invoice as User</text><polygon fill="#A80036" points="1204.5,459.1563,1214.5,463.1563,1204.5,467.1563,1208.5,463.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="772.5" x2="1210.5" y1="463.1563" y2="463.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="425" x="779.5" y="458.0903">Get Account Invoice as User /account/{accountId} [AccountToken]</text><polygon fill="#A80036" points="783.5,488.2891,773.5,492.2891,783.5,496.2891,779.5,492.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="777.5" x2="1220.5" y1="492.2891" y2="492.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="789.5" y="487.2231">Get Account Invoice</text><polygon fill="#A80036" points="71,517.4219,61,521.4219,71,525.4219,67,521.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="65" x2="766.5" y1="521.4219" y2="521.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="77" y="516.356">Account Invoice</text><!--MD5=[30b889fc52ae51208113be30acc26561]
@startuml authDiagram

boundary "Partner Service" as PartnerService
autoactivate on

PartnerService  -> AuthenticationController: Login as Partner
AuthenticationController  ->  AuthenticationService: POST /auth/login {clientId}
AuthenticationController <- -  AuthenticationService: Partner Token
PartnerService  <- - AuthenticationController: Partner Login

PartnerService  -> AuthenticationController: Login as User
AuthenticationController  ->  AuthenticationService: POST /auth/account/login [PartnerToken] + {accountId}
AuthenticationController <- -  AuthenticationService: Account specific token
PartnerService  <- - AuthenticationController: Account Login


PartnerService -> AccountController: Get Account Users as Partner
AccountController -> AccountService: Get /account/{accountId}/users + [PartnerToken]
AccountController <- - AccountService: Account Users
PartnerService <- - AccountController:  Account Users 


PartnerService -> AccountController: Get Account Invoice as User
AccountController -> AccountService: Get Account Invoice as User /account/{accountId} [AccountToken]
AccountController <- - AccountService: Get Account Invoice 
PartnerService <- - AccountController: Account Invoice

@enduml

PlantUML version 1.2020.22(Sun Dec 06 06:36:27 BRT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>